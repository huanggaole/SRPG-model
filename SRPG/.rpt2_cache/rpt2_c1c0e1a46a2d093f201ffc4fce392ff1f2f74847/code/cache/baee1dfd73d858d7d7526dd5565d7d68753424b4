{
  "code": "import Map from \"../data/Map\";\r\nexport default class MapScript extends Laya.Script {\r\n    constructor() {\r\n        super();\r\n        this.terrainImages = [];\r\n        let terrainpaths = [\r\n            \"comp/terrain_deepwater.png\",\r\n            \"comp/terrain_shallowwater.png\",\r\n            \"comp/terrain_plain.png\",\r\n            \"comp/terrain_grass.png\",\r\n            \"comp/terrain_road.png\"\r\n        ];\r\n        for (let i = 0; i < terrainpaths.length; i++) {\r\n            this.terrainImages.push(new Laya.Image(terrainpaths[i]));\r\n        }\r\n    }\r\n    onStart() {\r\n    }\r\n    onRefresh() {\r\n        let image = this.owner;\r\n        image.graphics.clear();\r\n        image.size(Map.width * Map.tilewidth, Map.height * Map.tileheight);\r\n        for (let i = 0; i < Map.height; i++) {\r\n            for (let j = 0; j < Map.width; j++) {\r\n                image.graphics.drawImage(this.terrainImages[Map.terrianarray[i][j]].source, j * Map.tilewidth, i * Map.tileheight, Map.tilewidth, Map.tileheight);\r\n            }\r\n        }\r\n    }\r\n    onMouseDown() {\r\n        this.lastX = Laya.stage.mouseX;\r\n        this.lastY = Laya.stage.mouseY;\r\n        this.ifMove = true;\r\n    }\r\n    onMouseUp() {\r\n        this.ifMove = false;\r\n    }\r\n    onMouseOut() {\r\n        this.ifMove = false;\r\n    }\r\n    onMouseMove() {\r\n        if (this.ifMove) {\r\n            let currentX = Laya.stage.mouseX;\r\n            let currentY = Laya.stage.mouseY;\r\n            let image = this.owner;\r\n            image.pivotX -= (currentX - this.lastX) / image.scaleX;\r\n            image.pivotY -= (currentY - this.lastY) / image.scaleY;\r\n            this.lastX = currentX;\r\n            this.lastY = currentY;\r\n        }\r\n    }\r\n}\r\n",
  "references": [
    "/Users/huanggaole/SRPG-model/SRPG/src/data/Map.ts"
  ]
}
